# ğŸŒ TikShop å¤–éƒ¨è®¿é—®é…ç½®æŒ‡å—

## ğŸ“‹ å½“å‰é…ç½®çŠ¶æ€

âœ… **æœåŠ¡å™¨ä¿¡æ¯**
- **æœåŠ¡å™¨IP**: 202.146.222.134
- **NginxçŠ¶æ€**: æ­£å¸¸è¿è¡Œ
- **é˜²ç«å¢™**: å·²å¼€æ”¾80/443ç«¯å£
- **æ‰€æœ‰æœåŠ¡**: æ­£å¸¸è¿è¡Œ

## ğŸŒ å¤–éƒ¨è®¿é—®åœ°å€

| æœåŠ¡ | å¤–éƒ¨è®¿é—®åœ°å€ | çŠ¶æ€ |
|------|-------------|------|
| ğŸ”§ **APIæœåŠ¡** | http://202.146.222.134/api | âœ… æ­£å¸¸ |
| ğŸ“š **APIæ–‡æ¡£** | http://202.146.222.134/api/docs | âœ… æ­£å¸¸ |
| ğŸ–¥ï¸ **ç®¡ç†åå°** | http://202.146.222.134/admin | âœ… æ­£å¸¸ |
| ğŸª **å•†å®¶ç«¯** | http://202.146.222.134/merchant | âœ… æ­£å¸¸ |
| ğŸ“± **ç”¨æˆ·å•†åŸ** | http://202.146.222.134 | âœ… æ­£å¸¸ |

## ğŸ”‘ æµ‹è¯•è´¦æˆ·

### ç®¡ç†å‘˜è´¦æˆ·
- **ç”¨æˆ·å**: admin
- **å¯†ç **: 123456
- **è®¿é—®åœ°å€**: http://202.146.222.134/admin

### å•†å®¶è´¦æˆ·
- **ç”¨æˆ·å**: merchant001
- **å¯†ç **: password123
- **è®¿é—®åœ°å€**: http://202.146.222.134/merchant

### ç”¨æˆ·è´¦æˆ·
- **æ‰‹æœºå·**: 13800138000
- **å¯†ç **: 123456
- **è®¿é—®åœ°å€**: http://202.146.222.134

## ğŸ› ï¸ æŠ€æœ¯é…ç½®è¯¦æƒ…

### Nginxåå‘ä»£ç†é…ç½®
```nginx
# é…ç½®æ–‡ä»¶ä½ç½®: /etc/nginx/sites-available/tikshop

# APIæœåŠ¡ (ç«¯å£3000)
location /api/ {
    proxy_pass http://localhost:3000;
}

# ç®¡ç†åå° (ç«¯å£5177)
location /admin/ {
    proxy_pass http://localhost:5177/;
}

# å•†å®¶ç«¯ (ç«¯å£5176)
location /merchant/ {
    proxy_pass http://localhost:5176/;
}

# ç”¨æˆ·å•†åŸ (ç«¯å£3001)
location / {
    proxy_pass http://localhost:3001/;
}
```

### æœåŠ¡ç«¯å£æ˜ å°„
| æœåŠ¡ | å†…éƒ¨ç«¯å£ | å¤–éƒ¨è·¯å¾„ |
|------|----------|----------|
| åç«¯API | 3000 | /api/ |
| ç®¡ç†åå° | 5177 | /admin/ |
| å•†å®¶ç«¯ | 5176 | /merchant/ |
| ç”¨æˆ·å•†åŸ | 3001 | / |

## ğŸ”§ ç®¡ç†å‘½ä»¤

### Nginxç®¡ç†
```bash
# æ£€æŸ¥NginxçŠ¶æ€
systemctl status nginx

# é‡æ–°åŠ è½½é…ç½®
systemctl reload nginx

# é‡å¯Nginx
systemctl restart nginx

# æŸ¥çœ‹Nginxæ—¥å¿—
tail -f /var/log/nginx/tikshop_access.log
tail -f /var/log/nginx/tikshop_error.log
```

### PM2æœåŠ¡ç®¡ç†
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# é‡å¯æ‰€æœ‰æœåŠ¡
pm2 restart all

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
pm2 logs

# ç›‘æ§é¢æ¿
pm2 monit
```

## ğŸ”’ å®‰å…¨é…ç½®

### å½“å‰å®‰å…¨è®¾ç½®
- âœ… é˜²ç«å¢™å·²é…ç½®
- âœ… å®‰å…¨å¤´å·²è®¾ç½®
- âœ… æ–‡ä»¶ä¸Šä¼ é™åˆ¶ (10MB)
- âœ… Gzipå‹ç¼©å·²å¯ç”¨

### å»ºè®®çš„å®‰å…¨å¢å¼º
1. **SSLè¯ä¹¦é…ç½®** (HTTPS)
2. **è®¿é—®é¢‘ç‡é™åˆ¶**
3. **IPç™½åå•** (å¯é€‰)
4. **å®šæœŸå®‰å…¨æ›´æ–°**

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å·²å¯ç”¨çš„ä¼˜åŒ–
- âœ… Gzipå‹ç¼©
- âœ… é™æ€æ–‡ä»¶ç¼“å­˜
- âœ… è¿æ¥æ± ä¼˜åŒ–
- âœ… è¶…æ—¶è®¾ç½®

### ç›‘æ§æŒ‡æ ‡
```bash
# æ£€æŸ¥æœåŠ¡å™¨è´Ÿè½½
htop

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ£€æŸ¥ç½‘ç»œè¿æ¥
netstat -tlnp
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜è§£å†³

#### 1. 502 Bad Gateway
```bash
# æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
pm2 status

# é‡å¯æœåŠ¡
pm2 restart all

# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tlnp | grep -E ":(3000|3001|5176|5177)"
```

#### 2. æ— æ³•è®¿é—®å¤–éƒ¨åœ°å€
```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
ufw status

# æ£€æŸ¥NginxçŠ¶æ€
systemctl status nginx

# æ£€æŸ¥ç«¯å£80ç›‘å¬
netstat -tlnp | grep :80
```

#### 3. APIæ¥å£æ— å“åº”
```bash
# æ£€æŸ¥åç«¯æ—¥å¿—
pm2 logs ecommerce-api

# æµ‹è¯•æœ¬åœ°API
curl http://localhost:3000/api/health

# æµ‹è¯•å¤–éƒ¨API
curl http://202.146.222.134/api/health
```

## ğŸŒ åŸŸåé…ç½® (å¯é€‰)

### 1. è´­ä¹°åŸŸå
- åœ¨åŸŸåæ³¨å†Œå•†è´­ä¹°åŸŸå
- å°†åŸŸåAè®°å½•æŒ‡å‘æœåŠ¡å™¨IP: 202.146.222.134

### 2. é…ç½®SSLè¯ä¹¦
```bash
# å®‰è£…Certbot
apt install certbot python3-certbot-nginx -y

# è·å–SSLè¯ä¹¦
certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
crontab -e
# æ·»åŠ : 0 12 * * * /usr/bin/certbot renew --quiet
```

### 3. æ›´æ–°Nginxé…ç½®
```nginx
server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;
    
    # å…¶ä»–é…ç½®...
}
```

## ğŸ“± ç§»åŠ¨ç«¯è®¿é—®

### å“åº”å¼è®¾è®¡
- âœ… æ‰€æœ‰å‰ç«¯éƒ½æ”¯æŒç§»åŠ¨ç«¯
- âœ… è‡ªé€‚åº”å¸ƒå±€
- âœ… è§¦æ‘¸å‹å¥½ç•Œé¢

### ç§»åŠ¨ç«¯æµ‹è¯•
```bash
# ä½¿ç”¨curlæ¨¡æ‹Ÿç§»åŠ¨ç«¯è¯·æ±‚
curl -H "User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)" \
     http://202.146.222.134/
```

## ğŸ”„ å¤‡ä»½å’Œæ¢å¤

### æ•°æ®åº“å¤‡ä»½
```bash
# å¤‡ä»½æ•°æ®åº“
mysqldump -u tikshop -p'TikShop_MySQL_#2025!9pQwXz' ecommerce > backup_$(date +%Y%m%d).sql

# æ¢å¤æ•°æ®åº“
mysql -u tikshop -p'TikShop_MySQL_#2025!9pQwXz' ecommerce < backup_20251018.sql
```

### æ–‡ä»¶å¤‡ä»½
```bash
# å¤‡ä»½ä¸Šä¼ æ–‡ä»¶
tar -czf uploads_backup_$(date +%Y%m%d).tar.gz /root/TikShop/ecommerce-backend/uploads/

# å¤‡ä»½é…ç½®æ–‡ä»¶
tar -czf config_backup_$(date +%Y%m%d).tar.gz /etc/nginx/sites-available/tikshop
```

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### ç³»ç»Ÿç›‘æ§
```bash
# å®æ—¶ç›‘æ§
htop

# ç£ç›˜ä½¿ç”¨
df -h

# å†…å­˜ä½¿ç”¨
free -h

# ç½‘ç»œè¿æ¥
ss -tuln
```

### åº”ç”¨ç›‘æ§
```bash
# PM2ç›‘æ§
pm2 monit

# Nginxè®¿é—®æ—¥å¿—
tail -f /var/log/nginx/tikshop_access.log

# åº”ç”¨é”™è¯¯æ—¥å¿—
pm2 logs --err
```

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### 1. ç«‹å³å¯ä»¥åšçš„
- âœ… æµ‹è¯•æ‰€æœ‰å¤–éƒ¨è®¿é—®åœ°å€
- âœ… ä½¿ç”¨æµ‹è¯•è´¦æˆ·ç™»å½•å„ä¸ªç³»ç»Ÿ
- âœ… éªŒè¯æ ¸å¿ƒåŠŸèƒ½æ˜¯å¦æ­£å¸¸

### 2. çŸ­æœŸä¼˜åŒ–
- ğŸ”„ é…ç½®SSLè¯ä¹¦ (HTTPS)
- ğŸ”„ è®¾ç½®åŸŸåè§£æ
- ğŸ”„ é…ç½®è‡ªåŠ¨å¤‡ä»½

### 3. é•¿æœŸè§„åˆ’
- ğŸ“Š æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
- ğŸ”’ å®‰å…¨åŠ å›º
- ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–
- ğŸš€ è´Ÿè½½å‡è¡¡ (å¦‚éœ€è¦)

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¿«é€Ÿæ£€æŸ¥å‘½ä»¤
```bash
# ä¸€é”®æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
cd /root/TikShop && echo "=== æœåŠ¡çŠ¶æ€æ£€æŸ¥ ===" && \
pm2 status && echo -e "\n=== NginxçŠ¶æ€ ===" && \
systemctl status nginx --no-pager -l && echo -e "\n=== å¤–éƒ¨è®¿é—®æµ‹è¯• ===" && \
curl -s http://202.146.222.134/api/health
```

### è”ç³»æ–¹å¼
- **é¡¹ç›®ç»´æŠ¤è€…**: Admin
- **æœåŠ¡å™¨IP**: 202.146.222.134
- **é¡¹ç›®åœ°å€**: https://github.com/Janice0516/TikShop

---

## âœ… éƒ¨ç½²å®Œæˆç¡®è®¤

è¯·ç¡®è®¤ä»¥ä¸‹é¡¹ç›®éƒ½å·²æ­£å¸¸å·¥ä½œï¼š

- [ ] å¤–éƒ¨APIè®¿é—®æ­£å¸¸
- [ ] ç®¡ç†åå°å¯ä»¥ç™»å½•
- [ ] å•†å®¶ç«¯å¯ä»¥ç™»å½•
- [ ] ç”¨æˆ·å•†åŸå¯ä»¥è®¿é—®
- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡

**ğŸ‰ æ­å–œï¼ä½ çš„TikShopç”µå•†å¹³å°å·²ç»æˆåŠŸå¼€æ”¾ç»™å¤–éƒ¨è®¿é—®ï¼**

---

æœ€åæ›´æ–°ï¼š2025-10-18
